(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"00fc":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("4795")),i=r(n("0421")),o=r(n("1c05")),s=n("2f62");function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,i,o,s){try{var r=e[o](s),c=r.value}catch(u){return void n(u)}r.done?t(c):Promise.resolve(c).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){c(o,a,i,s,r,"next",e)}function r(e){c(o,a,i,s,r,"throw",e)}s(void 0)}))}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={data:function(){return{app:1,name:"",pass:"",logining:!1,scrollTop:0,hisHdid:!1,hisList:[],checkbox:!1,language:"中文",langStatus:!0,images:"hwimg"}},computed:{i18n:function(){return this.$t("login")}},onShow:function(){this.hisHdid=!1},onLoad:function(){var t=e.getStorageSync("namehistory");if(console.log(t),""==t){var n=[];e.setStorageSync("namehistory",n)}else this.hisList=t;if("2"==this.$store.state.app){this.app=2;var a=e.getStorageSync("lang");a?(console.log(a.locale),"zh"==a.locale&&(this.language="English",this.langStatus=!1),"en"==a.locale&&(this.language="中文",this.langStatus=!1)):(this.$i18n.locale="en",this.language="中文",this.langStatus=!1)}},methods:f({},(0,s.mapMutations)(["login"]),{inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},switchChange:function(t){var n={locale:""};"English"==this.language?(this.language="中文",this.langStatus=!0,this.$i18n.locale="en",n.locale="en"):(this.langStatus=!0,this.language="English",this.$i18n.locale="zh",n.locale="zh"),e.setStorageSync("lang",n)},nameChange:function(e){var t=e.currentTarget.dataset.key;e.detail.value;this[t]=e.detail.value,this.pass=""},bindcheckbox:function(){this.checkbox=!this.checkbox},radioChange:function(e){this.images=e.detail.value},addname:function(){var t=e.getStorageSync("namehistory");console.log(t.length),0!=t.length&&(this.hisList=t,this.hisHdid=!0)},navBack:function(){e.navigateBack()},toRegist:function(){},bindhis:function(e){this.name=e,this.pass="",this.hisHdid=!1},close:function(){this.hisHdid=!1},address:function(){var e=this;plus.geolocation.getCurrentPosition((function(t){"中国"!=t.address.country&&(e.$i18n.locale="en")}))},toLogin:function(){var t=this;return u(a.default.mark((function n(){var s,r,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t,r=t.name,c=t.pass,e.hideKeyboard(),""!=r){n.next=6;break}return e.showToast({title:s.$t("login").userMsg,icon:"none"}),n.abrupt("return",!1);case 6:if(""!=c){n.next=9;break}return e.showToast({title:s.$t("login").passMsg,icon:"none"}),n.abrupt("return",!1);case 9:e.request({url:i.default.api+"/index.php/Home/Login/index",method:"post",data:{user:r,pass:c,images:s.images},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var n=t.data.data;if("ok"==t.data.res){if("2"==s.$store.state.app){var a={locale:"",lang:""};"English"==s.language?(a.locale="zh",a.lang="Chinese"):(a.locale="en",a.lang="English"),e.setStorageSync("lang",a)}var i={uid:n.uid,hdid:n.hdid,username:n.uname,token:(0,o.default)(n.uid+n.hdid+"ximi"),isvip:n.isvip,oversea:n.oversea};if(s.login(i),1==s.checkbox){console.log("需要保存");var r=s.name,c={name:r},u=e.getStorageSync("namehistory");if(0==u.length)u.push(c);else{for(var l=1,f=0;f<u.length;f++)switch(u[f].name){case r:l=2;break}1==l&&u.push(c)}e.setStorageSync("namehistory",u)}var g="wss://sw.xmvogue.com",h={timeout:15e3,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this},start:function(){var t=this;this.timeoutObj=setTimeout((function(){e.sendSocketMessage({data:"keep",success:function(e){console.log(e),h.reset().start()},fail:function(e){console.log(e)}}),t.serverTimeoutObj=setTimeout((function(){e.onSocketClose((function(e){console.log("WebSocket 已关闭！"),reconnect(g)}))}),t.timeout)}),this.timeout)}};e.connectSocket({url:g}),e.onSocketOpen((function(t){console.log("成功连接到"+g),setTimeout((function(){var t=e.getStorageSync("userinfo"),n=getCurrentPages(),a=n[0].route.split("/"),i='{"user_id":"'+t.hdid+'","user_name":"'+t.username+'","page":"'+a[2]+'","src":"app"}',o={class:"Xmorder",action:"connect",content:i},s=JSON.stringify(o);e.sendSocketMessage({data:s,success:function(e){console.log(s),h.reset().start()},fail:function(e){}})}),2e3)})),e.onSocketMessage((function(e){var t=e.data.split("arg:"),n=JSON.parse(t[1]);console.log(n)})),e.switchTab({url:"/pages/index/index"})}else s.$api.msg(t.data.msg)},fail:function(e){console.log(e)},complete:function(){}});case 10:case"end":return n.stop()}}),n)})))()}})};t.default=h}).call(this,n("543d")["default"])},"086c":function(e,t,n){"use strict";var a,i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},"2dfc":function(e,t,n){"use strict";(function(e){n("3f5c"),n("921b");a(n("66fd"));var t=a(n("ce47"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},4326:function(e,t,n){"use strict";var a=n("5d23"),i=n.n(a);i.a},"57a1":function(e,t,n){"use strict";n.r(t);var a=n("00fc"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"5d23":function(e,t,n){},ce47:function(e,t,n){"use strict";n.r(t);var a=n("086c"),i=n("57a1");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("4326");var s,r=n("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=c.exports}},[["2dfc","common/runtime","common/vendor"]]]);