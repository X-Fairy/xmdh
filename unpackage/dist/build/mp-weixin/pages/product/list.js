(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"1cc4":function(e,t,n){"use strict";var i=n("bef1"),a=n.n(i);a.a},2434:function(e,t,n){"use strict";(function(e){n("3f5c"),n("921b");i(n("66fd"));var t=i(n("aa00"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},5754:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("0421"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("5c08"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-number-box").then(function(){return resolve(n("ee3a"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("d4f9"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/empty").then(function(){return resolve(n("30fd"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/uni-scrollTo/uni-scrollTo").then(function(){return resolve(n("37c0"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/img-lazy/img-lazy").then(function(){return resolve(n("f796"))}.bind(null,n)).catch(n.oe)},u={title:"",thispage:0,Allpage:0,cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,priceOrder:0,cateList:[],goodsList:[],listId:"",page:1,pageSize:20,type:"add",activeId:"",downNum:"",navTitle:"",cartoon:!1,rightnavhide:!0,prciceHdid:!1,navHeight:0,bind:"",China:""},g={components:{uniNavBar:r,uniLoadMore:o,uniNumberBox:l,empty:s,scrllTop:c,imglazy:d},data:function(){return{imglazyStyle:"border-radius: 10upx;",list:{title:"",thispage:0,Allpage:0,cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,priceOrder:0,cateList:[],goodsList:[],listId:"",page:1,pageSize:20,activeId:"",downNum:"",navTitle:"",cartoon:!1,rightnavhide:!0,prciceHdid:!1,navHeight:0,type:"add",bind:"",China:""}}},computed:{i18n:function(){return this.$t("list")}},onLoad:function(e){var t=this;u=this.list,i.default.load(this.$t("index").loadmsg),this.getTitleHeight(),e.tid&&(u.cateId=e.tid),e.listId&&(u.listId=e.listId),setTimeout((function(){t.loadData()}),300)},onPageScroll:function(e){e.scrollTop>=0?u.headerPosition="fixed":u.headerPosition="absolute"},onPullDownRefresh:function(){u.page=1,u.type="refresh",this.loadData()},onReachBottom:function(){u.type="add",this.loadData()},methods:{imageError:function(e){},getTitleHeight:function(){e.getSystemInfo({success:function(e){return console.log(e.screenHeight),e.screenHeight<750?(u.navHeight="110px",!1):e.screenHeight<950?(u.navHeight="120px",!1):e.screenHeight>1e3?(u.navHeight="180px",!1):void 0}})},loadData:function(){var t=this,n=this,a={type:"app"};if(n.isNumber(u.listId)){var o={listId:u.listId,pagesize:u.pageSize,page:u.page,downNum:u.downNum};n.$ajax.category(o,a).then((function(t){if((null==t.list||0==t.list)&&1==t.other.thispage)return u.loadingType="nomore",e.hideLoading(),u.cartoon=!0,n.list=u,!1;2==t.nav.length&&(u.navTitle=t.nav[1].title),3==t.nav.length&&(u.navTitle=t.nav[2].title),4==t.nav.length&&(u.navTitle=t.nav[3].title),0==t.sub_cls.length&&(u.rightnavhide=!1),n.allPage(t)}))}else{var l={page:u.page,downNum:u.downNum};switch(u.listId){case"new":n.$ajax.hNew(l,a).then((function(e){u.navTitle=e.nav[1].title,n.allPage(e)}));break;case"supplement":n.$ajax.hBu(l,a).then((function(e){u.navTitle=e.nav[1].title,n.allPage(e)}));break;case"dis":n.$ajax.hDis(l,a).then((function(e){u.navTitle=e.nav[1].title,n.allPage(e)}));break;case"sell":n.$ajax.hSale(l,a).then((function(e){u.navTitle=e.nav[1].title,n.allPage(e)}));break;case"China":i.default.post("/index.php/Home/Promotion/China_products?p="+n.page+"&cls=01&num="+n.downNum,a,(function(i){if(!i.list)return t.$api.msg(i),e.hideLoading(),u.loadingType="nomore",!1;u.navTitle=i.nav[1].title,n.allPage(i)}));break;case"China70":i.default.post("/index.php/Home/Promotion/China70?p="+n.page+"&num="+n.downNum,a,(function(e){u.navTitle=e.nav[2].title,e.other.thispage=1,e.other.totalPage=1,n.allPage(e)}));break}}},allPage:function(t){var n=this;if(null==t.list||0==t.other.totalPage)return u.loadingType="nomore",e.hideLoading(),n.list=u,!1;u.prciceHdid=!0,u.Allpage=t.other.totalPage,u.thispage=t.other.thispage;var i=t.list;u.cateList=t.sub_cls;for(var a=0;a<i.length;a++){var o=n.$store.getters.imgShow+"/thumb/"+i[a].item_no+".jpg?x-oss-process=style/300";i[a].image=o,i[a].allNum=parseInt(i[a].spec),i[a].mini=parseInt(i[a].spec),i[a].circleHidden=!1,"0"!=i[a].cnum&&(i[a].circleHidden=!0)}var l=i;if(u.loadingType=t.other.thispage>t.other.totalPage?"nomore":"more","add"==u.type){if(u.page=u.page+1,"nomore"===u.loadingType)return void(n.list=u);u.loadingType="loading"}else u.loadingType="more";if("refresh"==u.type){if(u.goodsList=[],e.stopPullDownRefresh(),u.page=u.page+1,"nomore"===u.loadingType)return void(n.list=u);u.loadingType="loading"}if(l.length<20)return u.loadingType="nomore",e.hideLoading(),u.goodsList=u.goodsList.concat(l),n.list=u,!1;e.hideLoading(),u.goodsList=u.goodsList.concat(l),n.list=u},isNumber:function(e){var t=/^\d+(\.\d+)?$/,n=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!t.test(e)&&!n.test(e))},tabClick:function(t){u.bind="active",u.filterIndex=t,u.page=1,u.type="refresh",2==t?(u.priceOrder=1===u.priceOrder?2:1,1==u.priceOrder&&(u.downNum="desc"),2==u.priceOrder&&(u.downNum="asc"),this.loadData()):(u.priceOrder=0,u.downNum="",this.loadData()),e.pageScrollTo({duration:300,scrollTop:0}),i.default.load(this.$t("index").loadmsg)},toggleCateMask:function(e){var t="show"===e?10:300,n="show"===e?1:0;u.cateMaskState=2,setTimeout((function(){u.cateMaskState=n}),t),this.list=u},changeCate:function(t){var n=this;u.goodsList=[];var a=new Promise((function(e,n){u.listId=t.target.id,u.page=1,e(u.listId)}));a.then((function(e){console.log(e),n.toggleCateMask()})),u.activeId=t.target.id,this.toggleCateMask(),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),i.default.load(this.$t("index").loadmsg)},navToDetailPage:function(t){"dis"==u.listId?e.navigateTo({url:"/pages/product/product?productId=".concat(t.item_no,"&num=").concat(t.discount)}):e.navigateTo({url:"/pages/product/product?productId=".concat(t.item_no)})},bindChange:function(e){u.goodsList[e.index].allNum=e.number,this.list=u},shopping:function(e){var t=this,n={item_no:e.item_no,allNum:e.allNum};t.$ajax.addShop(n).then((function(n){"success"==n.result?(t.$api.msg(t.$t("index").msg1),e.circleHidden=!0,e.cnum=parseInt(e.cnum)+parseInt(e.allNum)):t.$api.msg(n.msg)}))},stopPrevent:function(){},back:function(){e.navigateBack({delta:1})}}};t.default=g}).call(this,n("543d")["default"])},"58bf":function(e,t,n){"use strict";var i={"uni-nav-bar":function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"d4f9"))},"uni-load-more":function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"5c08"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}))},aa00:function(e,t,n){"use strict";n.r(t);var i=n("58bf"),a=n("b9e4");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("1cc4");var l,r=n("f0c5"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],l);t["default"]=s.exports},b9e4:function(e,t,n){"use strict";n.r(t);var i=n("5754"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},bef1:function(e,t,n){}},[["2434","common/runtime","common/vendor"]]]);