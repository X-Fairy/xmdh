(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-update-update"],{"13db":function(t,e,a){"use strict";a.r(e);var n=a("aa5f"),i=a("cf70");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("f5a2");var o=a("2877"),l=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"6c43ea9e",null);e["default"]=l.exports},"9d02":function(t,e,a){"use strict";var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("3b2b"),a("4917"),a("28a5"),a("7f7f");var i=n(a("3d3b")),s={data:function(){return{info:"正在加载",Minfo:"未知",Mtip:"",updateInfo:"无",latest:null,packgeSize:null,packgePath:null,downloadTask:null,downloadProgress:0,title:"发现新版本",buttonLoading:!1,installed:!1,startProgress:!1,currentIsLatest:!0,appURL:"",ProgressHdid:!1,downcenter:[],server_version:0,iosLink:"https://itunes.apple.com/cn/app/XIMIVOGUE/id1256241115?mt=8&l=zh"}},onLoad:function(t){this.loadAndroid()},onReady:function(t){},onShow:function(){!0===this.installed&&this.packgePath&&(this.installed=!1,this.haveDownloaded())},onUnload:function(){this.downloadTask&&(this.closeTask(),this.showToast("更新被取消"),uni.navigateBack({delta:1}))},onPullDownRefresh:function(){uni.stopPullDownRefresh()},methods:{loadAndroid:function(){i.default.load(this.$t("index").loadmsg);var t=this;plus.runtime.getProperty(plus.runtime.appid,function(e){var a="";a="android"==plus.os.name.toLowerCase()?1:2;var n={version:e.version,type:a};i.default.post("/index.php/Home/Version/index",n,function(e){if(t.server_version=e.data.server_version,t.appURL=e.data.app_link,0!=e.data.update_note.length)t.downcenter=e.data.update_note.split("/");else{var a=[{0:"暂无"}];t.downcenter=a}uni.hideLoading()})})},showToast:function(t){uni.showToast({title:t,duration:3e3,icon:"none"})},goback:function(){uni.navigateBack({delta:1})},installPackge:function(){var t=this;plus.runtime.install(this.packgePath,{force:!0}),this.installed=!0,uni.setStorage({key:"updated",data:{completed:!0,packgePath:this.packgePath},success:function(t){console.log("成功保存更新记录")}}),this.packgePath.match(RegExp(/.wgt/))&&(this.installed=!1,uni.showModal({title:"提示",cancelText:t.$t("index").cancel,confirmText:t.$t("index").confirm,content:"应用将重启以完成更新",showCancel:!1,complete:function(){plus.runtime.restart()}}))},haveDownloaded:function(){var t=this,e=this;uni.showModal({title:"更新尚未完成",content:"您已下载更新包，但是还没有完成安装，请问是否要继续安装更新包呢？",cancelText:e.$t("index").cancel,confirmText:e.$t("index").confirm,success:function(e){e.confirm?t.installPackge():e.cancel&&(t.showToast("更新被取消"),uni.navigateBack({delta:1}))}})},closeTask:function(){this.downloadTask.abort(),this.downloadTask=null,this.startProgress=!1},createTask:function(t){var e=this;this.downloadProgress=0,this.startProgress=!0,this.downloadTask=uni.downloadFile({url:t,success:function(t){200===t.statusCode&&uni.saveFile({tempFilePath:t.tempFilePath,success:function(t){e.packgePath=t.savedFilePath,e.installPackge(),e.closeTask()}})}}),this.downloadTask.onProgressUpdate(function(t){e.downloadProgress=t.progress})},handleUpdate:function(){var t=this;"android"==plus.os.name.toLowerCase()?(t.ProgressHdid=!0,t.createTask(t.appURL)):plus.runtime.openURL(t.iosLink)}}};e.default=s},aa5f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"mark uni-popup"},[a("v-uni-view",{staticClass:"view"},[a("v-uni-view",{staticClass:"uptitle"},[t._v(t._s(t.title))]),a("v-uni-view",{staticClass:"smallTitle"},[a("v-uni-text",{staticClass:"title"},[t._v("版本: "+t._s(t.server_version))])],1),a("v-uni-view",{staticClass:"smallTitle"},[a("v-uni-text",{staticClass:"title"},[t._v("本次更新:")]),t._l(t.downcenter,function(e,n){return a("v-uni-view",{key:n,staticClass:"center"},[t._v(t._s(n+1)+"."+t._s(e))])})],2),1==t.ProgressHdid?a("v-uni-view",{staticClass:"smallTitle"},[a("v-uni-text",{staticClass:"title"},[t._v("下载进度: "+t._s(t.downloadProgress)+"%")]),a("v-uni-progress",{attrs:{percent:t.downloadProgress,"stroke-width":"4"}})],1):t._e(),a("v-uni-view",{staticClass:"btns"},[a("v-uni-view",{}),a("v-uni-view",{staticStyle:{display:"flex"}},[a("v-uni-view",{staticClass:"sure",on:{click:function(e){e=t.$handleEvent(e),t.goback(e)}}},[t._v("稍后更新")]),a("v-uni-view",{staticClass:"sure",on:{click:function(e){e=t.$handleEvent(e),t.handleUpdate()}}},[t._v("立刻更新")])],1)],1)],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},cf70:function(t,e,a){"use strict";a.r(e);var n=a("9d02"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},dad7:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.mark[data-v-6c43ea9e]{position:fixed;top:0;left:0;height:100vh;width:100vw;background:rgba(0,0,0,.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:1000}.view[data-v-6c43ea9e]{width:80vw;padding:%?20?% %?40?%;background-color:#fff;border-radius:%?10?%}.uptitle[data-v-6c43ea9e]{margin:%?20?% 0;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;font-size:%?32?%;font-weight:700}.item[data-v-6c43ea9e]{margin-left:%?50?%;text-align:left;font-size:%?30?%}.btns[data-v-6c43ea9e]{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.icon[data-v-6c43ea9e]{width:%?45?%;height:%?45?%;margin-right:%?10?%}.sure[data-v-6c43ea9e]{padding:%?10?% 0;color:#1890ff;font-size:%?30?%;font-weight:500;margin:%?50?% %?20?% 0 %?20?%}.progress[data-v-6c43ea9e]{margin-bottom:%?20?%}.smallTitle[data-v-6c43ea9e]{margin:%?3?% 0;color:#888}.smallTitle .title[data-v-6c43ea9e]{font-size:%?28?%}.smallTitle .center[data-v-6c43ea9e]{font-size:%?24?%}',""])},eacf:function(t,e,a){var n=a("dad7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("4cae2bc7",n,!0,{sourceMap:!1,shadowMode:!1})},f5a2:function(t,e,a){"use strict";var n=a("eacf"),i=a.n(n);i.a}}]);