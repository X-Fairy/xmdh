(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sale-add-sale-add"],{"2b2c":function(t,e,i){"use strict";var a=i("cf6d"),n=i.n(a);n.a},"52ba":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac6a"),i("3e59");var n=a(i("3d3b")),s={data:function(){return{title:"radio 单选框",radioType:!1,radioList:[],addList:[],form:{item_no:"",num:"",reason:"",item_name:""},scrollTop:0,current:-1,navHeight:0}},onLoad:function(t){n.default.pageTitle(this.$t("sale_add").title),this.radioList=this.$t("sale_add").radioList;var e=[];uni.setStorageSync("list",e);var i=0;uni.setStorageSync("radio",i),this.getTitleHeight()},computed:{i18n:function(){return this.$t("sale_add")}},onShow:function(){},methods:{getTitleHeight:function(){var t=this;uni.getSystemInfo({success:function(e){return console.log(e.screenHeight),e.screenHeight<750?(t.navHeight="450px",!1):e.screenHeight<950?(t.navHeight="550px",!1):e.screenHeight>1e3?(t.navHeight="600px",!1):void 0}})},check:function(t){var e=this,i=e.radioList,a=1,n=uni.getStorageSync("radio");if(99==n)return!1;0==n?(uni.setStorageSync("radio",a),e.radioType=!0,e.radioList[t].checked=!e.radioList[t].checked):(uni.setStorageSync("radio",a),e.radioType=!0,uni.showModal({content:e.$t("sale_add").hint5,cancelText:e.$t("index").cancel,confirmText:e.$t("index").confirm,success:function(a){if(a.confirm){var n=[],s={item_no:"",num:"",reason:"",item_name:""};e.form=s,uni.setStorageSync("list",n),e.addList=[],i.forEach(function(t,e){t.checked=!1}),e.radioList[t].checked=!e.radioList[t].checked}}}))},loadType:function(){this.radioType||this.$api.msg(this.$t("sale_add").hint1)},confirm:function(){var t,e=this,i=e.addList,a=e.radioList;a.forEach(function(e,i){1==e.checked&&(t=e.value)});var s={item_no:[],reason:[],type:t,aqty:[]};if(0==e.addList.length)return e.$api.msg(this.$t("sale_add").hint9),!1;i.forEach(function(t,e){s.item_no.push(t.item_no),s.reason.push(t.reason),s.aqty.push(t.num)}),console.log(s),n.default.arry("/index.php/Home/User/shouhou_add",s,function(t){uni.showToast({title:e.$t("sale_add").hint8});var i=1;uni.setStorageSync("radio",i),setTimeout(function(){uni.navigateBack({delta:1})},800)})},onScan:function(){console.log("点击");var t=this;uni.scanCode({success:function(e){console.log("条码类型："+e.scanType),console.log("条码内容："+e.result),t.form.item_no=e.result,n.default.post("/index.php/Home/User/getItemInfo?item_no="+e.result,"",function(e){console.log(t.current+1),t.current+1==2?t.form.num=1:t.form.num=e.data.purchase_spec,t.form.item_name=e.data.item_name})}})},bindadd:function(){var t=this,e=uni.getStorageSync("list"),i=t.form;if(!this.radioType)return this.$api.msg(t.$t("sale_add").hint1),!1;if(!i.item_no)return t.$api.msg(t.$t("sale_add").hint2),!1;for(var a=0;e.length>a;a++)if(e[a].item_no==i.item_no)return t.$api.msg(t.$t("sale_add").hint6),!1;if(!i.num)return t.$api.msg(t.$t("sale_add").hint3),!1;i.pics=[],e.push(i),e.forEach(function(e,i){e.img=t.$store.getters.imgShow+"/thumb/"+e.item_no+".jpg?x-oss-process=style/300"}),uni.setStorageSync("list",e);var n=uni.getStorageSync("list");this.addList=n;var s={item_no:"",num:"",reason:"",item_name:""};this.form=s},changeinput:function(t){var e=this;e.form,this.addList;n.default.post("/index.php/Home/User/getItemInfo?item_no="+t.detail.value,"",function(t){var i,a=e.radioList;a.forEach(function(t,e){1==t.checked&&(i=t.value)}),e.form.num=2==i?1:t.data.purchase_spec,e.form.item_name=t.data.item_name})},deleteCartItem:function(t,e){this.addList;var i=uni.getStorageSync("list");i.splice(e,1),this.addList.splice(e,1),uni.setStorageSync("list",i)},upload:function(t,e){console.log(this.addList);var i=uni.getStorageSync("userinfo"),a=this;uni.chooseImage({success:function(e){var n=e.tempFilePaths,s=uni.uploadFile({url:"https://api.xmvogue.com/index.php/Home/User/uppic?item_no="+t.item_no,filePath:n[0],name:"file",formData:{hdid:i.hdid,tmp_name:"ximei.jpg",uid:i.uid,sign:i.token},success:function(e){var i="http://ximiphoto.oss-cn-hangzhou.aliyuncs.com/shouhou/"+e.data+"?x-oss-process=style/300";t.pics.push(i);var n=a.addList;uni.setStorageSync("list",n),console.log(n),uni.showToast({title:a.$t("sale_add").hint7});var s=99;uni.setStorageSync("radio",s)}});s.onProgressUpdate(function(t){t.progress})}})}},onBackPress:function(){var t=1;uni.setStorageSync("radio",t)}};e.default=s},"6f52":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-74788842]{background:#f8f8f8;padding-top:%?16?%}@font-face{font-family:HMfont-home;src:url("data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAUwAAsAAAAACYQAAATiAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDMgqGIIUfATYCJAMUCwwABCAFhG0HTBsvCFGULk6O7EvIyYYekQTabRkvs9JQlpOfvbz+1w0unHdih8IPlwYu4AVBACgA4uH/9+u3z5U379/5org3yCbRNLs0TaKRlgiVSijeWJ0ZzLkS8ATx4uJbug0r1xUTOxd9mfzfzds2S/CDZkfhmJYuWtoBxfFZL4IIA64H/mPJWu72FLRrSwILKJD3gF64BW9vv7R5KJkFkhucBIGHkb7CQCuN+2J7wEW5MG3HhhW6HBxL/bQGy7P/doos6rDCB3x+oAeKyjXQQDeQDdDmvmHs8iIPE2hWsQcPRsanAzmFPioQN0WCEiCXMCsVxaEXuoKFRXxS9el1ugn46H1//OUaPUnN9InHLkfwQfCPoC/wfGQuOQiS4Zxgy8jYASjE/UL3TZJBbAdJTf49KXsBTS9JP/Z87p9PPQpFviFtM/7hUYQkEx1dPY6we1Xl4CSWONIIGgXUFDJJ/ITG9aLrgoYZwH9iN9BxG/BUA6HMVLhWiqL0GSwFVQtCCg0N4i1nIMRg+YoQ7DiNUp/h0D2DegTXPPDCAA2eBIUO3zeEGCyMBc6dQSrMEHXkjt7crEb70fBpdPgwnJ3WXLiGseANevw48+HD9I07tWu+LR7aQu17FENdc5qbH2euvmCVdcVtzmgOD2lS2x6ZPHoYj6bbNTUxdZ+4LVh0OHBxO9p4sv2UxZYdek+eZG3ZowcXT1umD2ac1Upv/uhRxrQG5L/ogFB8ZrZjbkgzY6ZdI316MEqnGlTex6bSXlnWjjtYDt2yKewCsPZho9TCNgvV3l5XunGmnt2MFAY3ahCFzds7dlgpbtrWvtXzbVyr3TGuqtNm7/E2vyv2rbpWt9WJ7N2OvRmR8fa9wuwfiDdEte1dwG3bvZyqtR0+l2KXAS2D5Kx9pLrNoW14p2QSdJ0av54B4C9CaGQX17XEkMTV7erp/js2rFi30u5aavFXV3C8ZmcVdLBYMXXhXzrk9XAOkxZlVsXXVVAp6yihE4w6oyK5tiCx0O7/UvQGXeT7hxpr1zaTtXu/lJ547PMStWJlzom+b2xlVrB2DEBo7f2go5mb5qqt+zHe4f0JbOxuAXZ/ASef3b6Vys9UxIvnoRJui5XNgLd2x45GSwM+P/ER1j+HCT8gGKRz7vdUawPwiQpQeQLRzrsZ2pVnBBT+KWzP+dX2ad/g0053TwGMkh/necfNcxAApBepCoCRC8zPf6+f8fAI+ViknPzlsIDv9DGF0mZq/4hGY8nPVFEQoxfMyXRLLVKtJZbyq1cGvBLpf1P1C/lnvR5Gu9C4kNBbiCAZWAlZbwOyYHdANbQLOr090GwXtXxoDktSlDFs0wMgTNsDyaSvkE27hSzYV1At8hU605GhORPxhkOb4hpyLCnhCN+4tMFYxGOqaNPGIb84lQhqKkrYuMyjZBJWLAoauzg6p5NRpIqwQ0wR1wpcOY42plmm0jgSHEcqKhjjapYpIzzOUchx1b5OTnTRBznymEqAHMAiSnAIPmOlGhgT4WFUoZ3mHJT5+lSEQI0KJdiKurJgJoIlJmrfmAtHzg2QUeqqRnWX0l2sloArDofGw2gsRiVjkdBJVBgxhrHq4n5lCB6OI2GHSDVfTqgR3VTtOL228h63QKNvUSNFjhI1Ov2DEqZBZO8ouxK2VsQj0otIIOSkV47hlQMAAAA=") format("woff2")}.icon[data-v-74788842]{font-family:HMfont-home!important;font-size:%?40?%;font-style:normal;position:absolute}.icon.scan[data-v-74788842]{position:absolute;right:%?30?%;top:10%;z-index:20}.icon.scan[data-v-74788842]:before{content:"\\E64B"}.checkbox[data-v-74788842]{font-size:%?50?%;line-height:1;padding:%?0?% %?2?%;color:#c0c4cc;background:#fff;border-radius:50px}.iconsaleActive[data-v-74788842]{color:#42baf2}.default-row[data-v-74788842]{margin-top:%?16?%}.default-row .tit[data-v-74788842]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.default-row uni-switch[data-v-74788842]{-webkit-transform:translateX(%?16?%) scale(.9);-ms-transform:translateX(%?16?%) scale(.9);transform:translateX(%?16?%) scale(.9)}.add-btn[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:%?690?%;height:%?80?%;margin:%?60?% auto;font-size:%?32?%;color:#fff;background-color:#7ac5cd;border-radius:%?10?%}.s-textarea[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#fff;padding:0 %?30?%;height:%?150?%}.s-textarea .tit[data-v-74788842]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?150?%;font-size:%?30?%;color:#303133;line-height:%?150?%}.s-textarea .uni-textarea[data-v-74788842]{height:%?150?%;overflow:hidden}.s-radio[data-v-74788842]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;border:1px solid #eee}.uni-list[data-v-74788842],.uni-list-cell[data-v-74788842]{position:static}.addcard[data-v-74788842]{padding:0 %?30?% %?120?% %?30?%}.s-header[data-v-74788842]{background:#fff;border-radius:%?10?%;width:100%;padding:%?20?%}.s-bottom[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;bottom:0;width:100%;z-index:10}.s-bottom .s-bottom-btn[data-v-74788842]{width:50%;background-color:#f7f7f7;border:#999;font-size:%?28?%;color:#6f6f6f;border-radius:0;border-top:none}.s-bottom .s-bottom-btn[data-v-74788842]:after{border-radius:0}.s-bottom .button-hover[data-v-74788842]{background-color:#ddd}.s-header[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;position:relative}.s-header uni-image[data-v-74788842]{width:%?120?%;height:%?110?%;border-radius:%?10?%;margin:0 %?15?%}.s-header .s-text[data-v-74788842]{font-size:%?28?%}.s-header .del-btn[data-v-74788842]{position:absolute;top:0;right:1%}.s-header .yticon[data-v-74788842]{color:red;font-weight:700}.row[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;padding:0 %?30?%;height:%?80?%;background:#fff}.row .tit[data-v-74788842]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?150?%;font-size:%?28?%;color:#303133}.row .placeholder[data-v-74788842]{font-size:%?28?%}.row .input[data-v-74788842]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:%?28?%;color:#303133}.row .uploadImg[data-v-74788842]{width:%?100?%;height:%?100?%}.box-border[data-v-74788842]{margin:%?10?% 0}.scroll-Y[data-v-74788842]{padding-bottom:%?100?%}.uploadinfo[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;padding:0 %?30?%;background:#fff}.uploadinfo .tit[data-v-74788842]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?150?%;font-size:%?28?%;color:#303133}.uploadinfo .imgFlex[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:%?10?%}.uploadinfo .imgFlex .uploadImg[data-v-74788842]{margin:%?5?%;width:%?110?%;height:%?110?%}.radioclass[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;height:%?100?%;padding:%?25?% 0;border:1px solid #eee}.saleradio[data-v-74788842]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}body.?%PAGE?%[data-v-74788842]{background:#f8f8f8}',""])},ca21:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticStyle:{"background-color":"white"}},[i("v-uni-view",{staticClass:"radioclass"},t._l(t.radioList,function(e,a){return i("v-uni-view",{key:a},[i("v-uni-view",{staticClass:"saleradio"},[i("v-uni-view",{staticClass:"yticon iconsale checkbox",class:{iconsaleActive:e.checked},on:{click:function(e){e=t.$handleEvent(e),t.check(a)}}}),i("v-uni-view",{staticClass:"left"},[t._v(t._s(e.name))])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"row b-b"},[i("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.i18n.code))]),i("v-uni-input",{staticClass:"input",staticStyle:{width:"50%"},attrs:{type:"text",placeholder:t.i18n.hint2,"placeholder-class":"placeholder"},on:{blur:function(e){e=t.$handleEvent(e),t.changeinput(e)},input:function(e){e=t.$handleEvent(e),t.loadType(e)}},model:{value:t.form.item_no,callback:function(e){t.$set(t.form,"item_no",e)},expression:"form.item_no"}}),i("v-uni-text",{staticClass:"icon scan",on:{click:function(e){e=t.$handleEvent(e),t.onScan(e)}}})],1),i("v-uni-view",{staticClass:"row b-b"},[i("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.i18n.qty))]),i("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:t.i18n.hint3,"placeholder-class":"placeholder"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1),i("v-uni-view",{staticClass:"s-textarea"},[i("v-uni-view",{staticClass:"tit"},[t._v(t._s(t.i18n.reason))]),i("v-uni-view",{staticClass:"uni-textarea"},[i("v-uni-textarea",{staticStyle:{padding:"12upx 0px"},attrs:{placeholder:t.i18n.hint4,"placeholder-style":"font-size:28upx;color: #999999;"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1)],1),i("v-uni-view",{staticClass:"addcard"},t._l(t.addList,function(e,a){return i("v-uni-view",{key:a,staticClass:"box-border"},[i("v-uni-view",{staticClass:"s-header"},[i("v-uni-image",{staticClass:"s-header-img",attrs:{src:e.img,mode:""}}),i("v-uni-view",{staticClass:"s-text"},[i("v-uni-view",[t._v(t._s(e.item_name))]),i("v-uni-view",[t._v(t._s(t.i18n.code)+": "+t._s(e.item_no))])],1),i("v-uni-view",{staticClass:"del-btn yticon icon-fork",on:{click:function(i){i=t.$handleEvent(i),t.deleteCartItem(e,a)}}})],1),i("v-uni-view",{staticClass:"row b-b",staticStyle:{"border-top":"1px solid #EEEEEE"}},[i("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.i18n.reason)+":")]),i("v-uni-input",{staticClass:"input",attrs:{type:"text","placeholder-class":"placeholder"},model:{value:e.reason,callback:function(i){t.$set(e,"reason",i)},expression:"item.reason"}})],1),i("v-uni-view",{staticClass:"uploadinfo"},[i("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.i18n.photo)+":")]),i("v-uni-view",{staticClass:"imgFlex"},[t._l(e.pics,function(t,e){return i("v-uni-view",{key:e,staticClass:"uploadImg"},[i("v-uni-image",{staticClass:"uploadImg",attrs:{src:t,mode:""}})],1)}),i("v-uni-image",{staticClass:"uploadImg",attrs:{src:"../../static/addHeadIcon.png",mode:""},on:{click:function(i){i=t.$handleEvent(i),t.upload(e,a)}}})],2)],1)],1)}),1),i("v-uni-view",{staticClass:"s-bottom"},[i("v-uni-button",{staticClass:"s-bottom-btn",attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.bindadd(e)}}},[t._v(t._s(t.i18n.add))]),i("v-uni-button",{staticClass:"s-bottom-btn",attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.confirm(e)}}},[t._v(t._s(t.i18n.submit))])],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},cc95:function(t,e,i){"use strict";i.r(e);var a=i("52ba"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},cf6d:function(t,e,i){var a=i("6f52");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0ece409d",a,!0,{sourceMap:!1,shadowMode:!1})},e3df:function(t,e,i){"use strict";i.r(e);var a=i("ca21"),n=i("cc95");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("2b2c");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"74788842",null);e["default"]=r.exports}}]);