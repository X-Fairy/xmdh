(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"2e33":function(e,t,n){"use strict";n.r(t);var a=n("e71f"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a},"3a23":function(e,t,n){"use strict";(function(e){n("d471"),n("921b");a(n("66fd"));var t=a(n("a6a9"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"783f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},"986a":function(e,t,n){},a6a9:function(e,t,n){"use strict";n.r(t);var a=n("783f"),i=n("2e33");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("ae31");var s=n("2877"),u=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=u.exports},ae31:function(e,t,n){"use strict";var a=n("986a"),i=n.n(a);i.a},e71f:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("a34a")),o=r(n("3d3b")),s=r(n("2dbb")),u=n("2f62");function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,a,i,o,s){try{var u=e[o](s),r=u.value}catch(l){return void n(l)}u.done?t(r):Promise.resolve(r).then(a,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function s(e){l(o,a,i,s,u,"next",e)}function u(e){l(o,a,i,s,u,"throw",e)}s(void 0)})}}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={data:function(){return{app:1,name:"",pass:"",logining:!1,scrollTop:0,hisHdid:!1,hisList:[],checkbox:!1,language:"中文",langStatus:!0,images:"hwimg"}},computed:{i18n:function(){return this.$t("login")}},onShow:function(){this.hisHdid=!1},onLoad:function(){var t=e.getStorageSync("namehistory");if(console.log(a(t," at pages\\login\\login.vue:121")),""==t){var n=[];e.setStorageSync("namehistory",n)}else this.hisList=t;if("2"==this.$store.state.app){this.app=2;var i=e.getStorageSync("lang");i?(console.log(a(i.locale," at pages\\login\\login.vue:133")),"zh"==i.locale&&(this.language="English",this.langStatus=!1),"en"==i.locale&&(this.language="中文",this.langStatus=!1)):(this.$i18n.locale="en",this.language="中文",this.langStatus=!1)}this.address()},methods:g({},(0,u.mapMutations)(["login"]),{inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},switchChange:function(t){var n={locale:""};"English"==this.language?(this.language="中文",this.langStatus=!0,this.$i18n.locale="en",n.locale="en"):(this.langStatus=!0,this.language="English",this.$i18n.locale="zh",n.locale="zh"),e.setStorageSync("lang",n)},nameChange:function(e){var t=e.currentTarget.dataset.key;e.detail.value;this[t]=e.detail.value,this.pass=""},bindcheckbox:function(){this.checkbox=!this.checkbox},radioChange:function(e){this.images=e.detail.value},addname:function(){var t=e.getStorageSync("namehistory");console.log(a(t.length," at pages\\login\\login.vue:196")),0!=t.length&&(this.hisList=t,this.hisHdid=!0)},navBack:function(){e.navigateBack()},toRegist:function(){},bindhis:function(e){this.name=e,this.pass="",this.hisHdid=!1},close:function(){this.hisHdid=!1},address:function(){var e=this;plus.geolocation.getCurrentPosition(function(t){"中国"!=t.address.country&&(e.$i18n.locale="en")})},toLogin:function(){var t=c(i.default.mark(function t(){var n,u,r;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this,u=this.name,r=this.pass,e.hideKeyboard(),""!=u){t.next=6;break}return e.showToast({title:n.$t("login").userMsg,icon:"none"}),t.abrupt("return",!1);case 6:if(""!=r){t.next=9;break}return e.showToast({title:n.$t("login").passMsg,icon:"none"}),t.abrupt("return",!1);case 9:e.request({url:o.default.api+"/index.php/Home/Login/index",method:"post",data:{user:u,pass:r,images:n.images},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var i=t.data.data;if("ok"==t.data.res){if("2"==n.$store.state.app){var u={locale:"",lang:""};"English"==n.language?(u.locale="zh",u.lang="Chinese"):(u.locale="en",u.lang="English"),e.setStorageSync("lang",u)}var r={uid:i.uid,hdid:i.hdid,username:i.uname,token:(0,s.default)(i.uid+i.hdid+"ximi"),isvip:i.isvip,oversea:i.oversea};if(n.login(r),1==n.checkbox){console.log(a("需要保存"," at pages\\login\\login.vue:300"));var l=n.name,c={name:l},g=e.getStorageSync("namehistory");if(0==g.length)g.push(c);else{for(var f=1,h=0;h<g.length;h++)switch(g[h].name){case l:f=2;break}1==f&&g.push(c)}e.setStorageSync("namehistory",g)}var d="wss://sw.xmvogue.com",p={timeout:15e3,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this},start:function(){var t=this;this.timeoutObj=setTimeout(function(){e.sendSocketMessage({data:"keep",success:function(e){console.log(a(e," at pages\\login\\login.vue:353")),p.reset().start()},fail:function(e){console.log(a(e," at pages\\login\\login.vue:357"))}}),t.serverTimeoutObj=setTimeout(function(){e.onSocketClose(function(e){console.log(a("WebSocket 已关闭！"," at pages\\login\\login.vue:362")),reconnect(d)})},t.timeout)},this.timeout)}};e.connectSocket({url:d}),e.onSocketOpen(function(t){console.log(a("成功连接到"+d," at pages\\login\\login.vue:375")),setTimeout(function(){var t=e.getStorageSync("userinfo"),n=getCurrentPages(),i=n[0].route.split("/"),o='{"user_id":"'+t.hdid+'","user_name":"'+t.username+'","page":"'+i[2]+'","src":"app"}',s={class:"Xmorder",action:"connect",content:o},u=JSON.stringify(s);e.sendSocketMessage({data:u,success:function(e){console.log(a(u," at pages\\login\\login.vue:391")),p.reset().start()},fail:function(e){}})},2e3)}),e.onSocketMessage(function(e){var t=e.data.split("arg:"),n=JSON.parse(t[1]);console.log(a(n," at pages\\login\\login.vue:405"))}),o.default.getclient(),e.switchTab({url:"/pages/index/index"})}else n.$api.msg(t.data.msg)},fail:function(e){console.log(a(e," at pages\\login\\login.vue:425"))},complete:function(){}});case 10:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()})};t.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["3a23","common/runtime","common/vendor"]]]);