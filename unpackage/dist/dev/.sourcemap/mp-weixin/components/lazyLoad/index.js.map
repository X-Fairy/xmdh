{"version":3,"sources":["webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?998f","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?d9e6","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?9691","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?1ae9","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?9b81","webpack:///D:/ximei/XiMei/components/lazyLoad/index.vue?210a"],"names":["props","src","type","String","default","mode","scrollId","data","guid","animeSwitchTime","isShowImg","imgLoadState","start","end","path","loading","error","componentName","count","nextLoad","loadingAnime","computed","hasLoadingRes","Boolean","hasErrorRes","methods","$_init","Tools","getGUID","lazyLoadPlugin","getConfig","$_setImgType","$_on","on","id","context","$refs","fn","Promise","resolve","reject","$_minLoadAnime","$watch","config","name","imgLoadSuccess","$_imgLoadCommon","imgLoadError","time","minLoadAnimeTime","setTimeout","$_intervalLoad","intervalTime","watch","val","created","components","AnimeStateSwitch","loadingExport","errorExport"],"mappings":"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","file":"components/lazyLoad/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5c6b435a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5c6b435a', component.options)\n    } else {\n      api.reload('5c6b435a', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=5c6b435a&\", function () {\n      api.rerender('5c6b435a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"ximei/XiMei/components/lazyLoad/index.vue\"\nexport default component.exports","export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5c6b435a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport AnimeStateSwitch from './AnimeStateSwitch';\r\nimport loadingExport from './loadingExport';\r\nimport errorExport from './errorExport';\r\nimport lazyLoadPlugin from '../../plugins/lazyLoad/js/index';\r\nimport Tools from '../../plugins/lazyLoad/js/tools'\r\n\r\nexport default {\r\n    props: {\r\n        // 图片路径\r\n        src: {\r\n            type: String,\r\n            default: \"\"\r\n        },\r\n\r\n        // 图片裁剪、缩放的模式\r\n        mode: {\r\n            type: String,\r\n            default: \"scaleToFill\"\r\n        },\r\n\r\n        // 当前组件所在的scroll标签内的id\r\n        scrollId: {\r\n            type: String\r\n        }\r\n    },\r\n\r\n    data () {\r\n        return {\r\n            // 图片 id\r\n            guid: \"\",\r\n\r\n            // 动画过度时间\r\n            animeSwitchTime: 500,\r\n\r\n            // 是否显示图片\r\n            isShowImg: false,\r\n\r\n            // 图片加载状态\r\n            imgLoadState: {\r\n                start: false,\r\n                end: false\r\n            },\r\n\r\n            // 加载动画的图片名称\r\n            path: {\r\n                loading: null,\r\n                error: null\r\n            },\r\n\r\n            // 加载动画的组件名称\r\n            componentName: {\r\n                loading: null,\r\n                error: null\r\n            },\r\n\r\n            // 统计次数\r\n            count: {\r\n                nextLoad: 0,\r\n                loadingAnime: 0\r\n            },\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        // 是否有 loading 资源\r\n        hasLoadingRes () {\r\n            return Boolean(this.path.loading || this.componentName.loading)\r\n        },\r\n\r\n        // 是否有 error 资源\r\n        hasErrorRes () {\r\n            return Boolean(this.path.error || this.componentName.error)\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // 初始化\r\n        $_init () {\r\n            this.guid = Tools.getGUID();\r\n            this.animeSwitchTime = lazyLoadPlugin.getConfig().animeSwitchTime;\r\n            this.$_setImgType(\"loading\");\r\n            this.$_on();\r\n        },\r\n\r\n        // 订阅并监听图片加载状态\r\n        $_on () {\r\n            lazyLoadPlugin.on({\r\n                id: this.scrollId,\r\n                guid: '#' + this.guid,\r\n                context: this.$refs.loading,\r\n                fn: () => {\r\n                    return new Promise((resolve, reject) => {\r\n                        this.imgLoadState.start = true;\r\n                        this.count.loadingAnime++;\r\n                        this.$_minLoadAnime()\r\n                        this.$watch(\"imgLoadState.end\", resolve);\r\n                    })\r\n                }\r\n            })\r\n        },\r\n\r\n        // 设置图片\r\n        $_setImgType (type) {\r\n            const config = lazyLoadPlugin.getConfig();\r\n\r\n            if (config[type].type === 'img') {\r\n                this.path[type] = config[type].path;\r\n            } else if (config[type].type === 'component') {\r\n                this.componentName[type] = config[type].name;\r\n            }\r\n        },\r\n\r\n        // 图片加载完成\r\n        imgLoadSuccess () {\r\n            this.$_imgLoadCommon();\r\n        },\r\n\r\n        // 图片加载出错\r\n        imgLoadError () {\r\n            this.$_imgLoadCommon();\r\n            this.$_setImgType(\"error\")\r\n        },\r\n\r\n        // 图片加载相同部分\r\n        $_imgLoadCommon () {\r\n            this.count.nextLoad++;\r\n            this.count.loadingAnime++;\r\n            this.$_minLoadAnime()\r\n        },\r\n\r\n        // 最少过度动画时间\r\n        $_minLoadAnime () {\r\n            if (this.count.loadingAnime != 2) return;\r\n\r\n            let { minLoadAnimeTime: time } = lazyLoadPlugin.getConfig()\r\n\r\n            setTimeout(() => {\r\n                this.isShowImg = true;\r\n                this.count.nextLoad++;\r\n            }, time);\r\n        },\r\n\r\n        // 图片加载间隔(停顿)时间\r\n        $_intervalLoad () {\r\n            let { intervalTime: time } = lazyLoadPlugin.getConfig()\r\n\r\n            setTimeout(() => {\r\n                this.imgLoadState.end = true;\r\n            }, time);\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        'count.nextLoad' (val) {\r\n            val === 2 && this.$_intervalLoad();\r\n        }\r\n    },\r\n\r\n    created () {\r\n        this.$_init();\r\n    },\r\n\r\n    components: {\r\n        AnimeStateSwitch,\r\n        loadingExport,\r\n        errorExport\r\n    }\r\n}\r\n","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}