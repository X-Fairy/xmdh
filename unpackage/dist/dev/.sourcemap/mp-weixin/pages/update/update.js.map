{"version":3,"sources":["webpack:///E:/项萍/熙美订货/main.js","webpack:///E:/项萍/熙美订货/pages/update/update.vue?baa6","webpack:///E:/项萍/熙美订货/pages/update/update.vue?4f28","webpack:///E:/项萍/熙美订货/pages/update/update.vue?5325","webpack:///E:/项萍/熙美订货/pages/update/update.vue?72c1","webpack:///E:/项萍/熙美订货/pages/update/update.vue","webpack:///E:/项萍/熙美订货/pages/update/update.vue?572b","webpack:///E:/项萍/熙美订货/pages/update/update.vue?309e"],"names":["createPage","Page","mvc","title","downcenter","server_version","ProgressHdid","downloadProgress","data","info","Minfo","Mtip","updateInfo","latest","packgeSize","packgePath","downloadTask","buttonLoading","installed","startProgress","currentIsLatest","appURL","iosLink","onLoad","option","loadAndroid","onReady","OP","onShow","haveDownloaded","onUnload","closeTask","showToast","uni","navigateBack","delta","onPullDownRefresh","stopPullDownRefresh","methods","api","load","$t","loadmsg","that","plus","runtime","getProperty","appid","wgtinfo","status","os","name","toLowerCase","params","version","type","$ajax","Version","then","res","app_link","update_note","length","split","arry","hideLoading","text","duration","icon","goback","installPackge","install","force","setStorage","key","completed","success","console","log","match","RegExp","showModal","cancelText","cancel","confirmText","confirm","content","showCancel","complete","restart","abort","createTask","downloadLink","downloadFile","url","statusCode","saveFile","tempFilePath","savedFilePath","onProgressUpdate","progress","handleUpdate","openURL"],"mappings":"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","file":"pages/update/update.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/update/update.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./update.vue?vue&type=template&id=22366144&\"\nvar renderjs\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./update.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/项萍/熙美订货/pages/update/update.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=template&id=22366144&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '@/common/index.js';\nlet mvc = {\n\ttitle: \"发现新版本\",\n\tdowncenter: [],\n\tserver_version: 0,\n\tProgressHdid: false,\n\tdownloadProgress: 0, // 下载进度\n}\nexport default {\n\n\tdata() {\n\n\t\treturn {\n\t\t\tinfo: '正在加载', // 主标题显示版本号\n\t\t\tMinfo: '未知', // 副标题显示版本类型\n\t\t\tMtip: '', // 小提示标语\n\t\t\tupdateInfo: '无', // 更新摘要\n\t\t\tlatest: null, // 版本信息\n\t\t\tpackgeSize: null, // 更新包大小\n\t\t\tpackgePath: null, // 更新包的文件地址\n\t\t\tdownloadTask: null, // 下载任务\n\t\t\tbuttonLoading: false, // 加载 - 标记\n\t\t\tinstalled: false, // 是否执行了安装 - 标记\n\t\t\tstartProgress: false, // 下载进行 - 标记\n\t\t\tcurrentIsLatest: true, // 当前版本就是最新版本 - 标记\n\t\t\tappURL: '',\n\t\t\tiosLink: 'https://itunes.apple.com/cn/app/XIMIVOGUE/id1256241115?mt=8&l=zh',\n\t\t\tmvc: {\n\t\t\t\ttitle: \"发现新版本\",\n\t\t\t\tdowncenter: [],\n\t\t\t\tserver_version: 0,\n\t\t\t\tProgressHdid: false,\n\t\t\t\tdownloadProgress: 0, // 下载进度\n\n\t\t\t}\n\n\t\t}\n\t},\n\tonLoad(option) {\n\t\tthis.loadAndroid();\n\t},\n\tonReady(OP) {\n\n\t},\n\t// 如果用户下载后没有完成安装，却回到app，则执行这里\n\tonShow() {\n\t\tif (this.installed === true && this.packgePath) {\n\t\t\tthis.installed = false\n\t\t\tthis.haveDownloaded()\n\t\t}\n\t},\n\t// 用户关闭页面时检查是否存在下载任务\n\tonUnload() {\n\t\tif (this.downloadTask) {\n\t\t\tthis.closeTask();\n\t\t\tthis.showToast('更新被取消');\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t})\n\t\t}\n\t},\n\t// 下拉刷新更新\n\tonPullDownRefresh() {\n\n\t\tuni.stopPullDownRefresh()\n\t},\n\tmethods: {\n\n\t\tloadAndroid() {\n\t\t\tapi.load(this.$t('index').loadmsg)\n\n\t\t\tlet that = this;\n\t\t\tplus.runtime.getProperty(plus.runtime.appid, (wgtinfo) => {\n\t\t\t\tlet status = '';\n\t\t\t\tif (plus.os.name.toLowerCase() == \"android\") {\n\t\t\t\t\tstatus = 1; // 当前系统为安卓\n\n\t\t\t\t} else {\n\t\t\t\t\tstatus = 2; // 当前系统为ios\n\t\t\t\t}\n\n\t\t\t\tlet params = {\n\t\t\t\t\tversion: wgtinfo.version,\n\t\t\t\t\ttype: status\n\t\t\t\t}\n\t\t\t\tthat.$ajax.Version(params).then(res=>{\n\t\t\t\t\tmvc.server_version = res.server_version;\n\t\t\t\t\tthat.appURL = res.app_link;\n\t\t\t\t\tif (res.update_note.length != 0) {\n\t\t\t\t\t\tmvc.downcenter = res.update_note.split(\"/\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet arry = [{\n\t\t\t\t\t\t\t0: \"暂无\"\n\t\t\t\t\t\t}]\n\t\t\t\t\t\tmvc.downcenter = arry;\n\t\t\t\t\t}\n\t\t\t\t\tthat.mvc = mvc\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t})\n\t\t\t\t\n\t\t\t})\n\t\t},\n\t\tshowToast(text) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: text,\n\t\t\t\tduration: 3000,\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t},\n\t\tgoback() {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t})\n\t\t},\n\t\tinstallPackge() {\n\t\t\t// 安装更新\n\t\t\tlet that = this;\n\t\t\tplus.runtime.install(this.packgePath, {\n\t\t\t\tforce: true\n\t\t\t})\n\t\t\tthis.installed = true\n\t\t\t// 保存更新记录到stroage，方便下次启动app时删除安装包\n\t\t\tuni.setStorage({\n\t\t\t\tkey: 'updated',\n\t\t\t\tdata: {\n\t\t\t\t\tcompleted: true,\n\t\t\t\t\tpackgePath: this.packgePath\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('成功保存更新记录')\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 判断是否为热更新（判断文件名中是否含有.wgt）\n\t\t\tif (this.packgePath.match(RegExp(/.wgt/))) {\n\t\t\t\tthis.installed = false\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcancelText: that.$t('index').cancel,\n\t\t\t\t\tconfirmText: that.$t('index').confirm,\n\t\t\t\t\tcontent: '应用将重启以完成更新',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tplus.runtime.restart()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t// 已经下载了更新包但是没有安装\n\t\thaveDownloaded() {\n\t\t\tlet that = this\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '更新尚未完成',\n\t\t\t\tcontent: '您已下载更新包，但是还没有完成安装，请问是否要继续安装更新包呢？',\n\t\t\t\tcancelText: that.$t('index').cancel,\n\t\t\t\tconfirmText: that.$t('index').confirm,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t// 安装\n\t\t\t\t\t\tthis.installPackge()\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tthis.showToast('更新被取消')\n\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 关闭下载任务\n\t\tcloseTask() {\n\t\t\tthis.downloadTask.abort()\n\t\t\tthis.downloadTask = null\n\t\t\tthis.startProgress = false\n\t\t},\n\t\t// 开始下载任务\n\t\tcreateTask(downloadLink) {\n\t\t\tlet that = this;\n\t\t\tmvc.downloadProgress = 0\n\t\t\tthis.startProgress = true\n\n\t\t\t// 创建下载任务对象\n\t\t\tthis.downloadTask = uni.downloadFile({\n\t\t\t\turl: downloadLink,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t// 保存下载的安装包\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tthis.packgePath = res.savedFilePath\n\t\t\t\t\t\t\t\t// 进行安装\n\t\t\t\t\t\t\t\tthis.installPackge()\n\t\t\t\t\t\t\t\t// 任务完成，关闭下载任务\n\t\t\t\t\t\t\t\tthis.closeTask()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 进度条更新\n\t\t\tthis.downloadTask.onProgressUpdate((res) => {\n\t\t\t\tmvc.downloadProgress = res.progress;\n\t\t\t\tthat.mvc = mvc;\n\t\t\t})\n\n\t\t},\n\t\thandleUpdate() {\n\t\t\tlet that = this;\n\t\t\tif (plus.os.name.toLowerCase() == \"android\") {\n\t\t\t\tmvc.ProgressHdid = true;\n\t\t\t\tthat.createTask(that.appURL);\n\t\t\t} else {\n\t\t\t\tplus.runtime.openURL(that.iosLink);\n\t\t\t}\n\t\t\tthat.mvc = mvc;\n\t\t\t// 判断系统类型\n\n\t\t\t// console.log(plus.os.name.toLowerCase());\n\t\t\t// if (plus.os.name.toLowerCase() === 'android') {\n\t\t\t// \tif (this.latest.androidLink && this.latest.androidLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\n\t\t\t// \t\t// 安卓：创建下载任务\n\t\t\t// \t\tthis.createTask(that.appURL)\n\t\t\t// \t\t//https://download.dgstaticresources.net/fusion/android/app-c6-release.apk\n\t\t\t// \t\t//http://demo.dcloud.net.cn/test/update/H5EF3C469.wgt\n\t\t\t// \t} else {\n\t\t\t// \t\tthis.showToast('未找到下载地址')\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t// else {\n\t\t\t// \tif (this.latest.iosLink && this.latest.iosLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\n\t\t\t// \t\t// 苹果(A)：进行热更新（如果iosLink是wgt更新包的下载地址）判断文件名中是否含有.wgt\n\t\t\t// \t\tif (this.latest.iosLink.match(RegExp(/.wgt/))) {\n\t\t\t// \t\t\tthis.createTask(this.latest.iosLink)\n\t\t\t// \t\t} else {\n\t\t\t// \t\t\t// 苹果(B)：打开商店链接（如果iosLink是苹果商店的地址）\n\t\t\t// \t\t\tplus.runtime.openURL(this.latest.iosLink)\n\t\t\t// \t\t}\n\t\t\t// \t} else {\n\t\t\t// \t\tthis.showToast('未找到ios商店地址')\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t}\n}\n","import mod from \"-!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\xmcp\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588644344194\n      var cssReload = require(\"C:/Users/xmcp/Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}